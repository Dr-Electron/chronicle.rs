name: chronicli
version: "0.1"
author: IOTA Stiftung
about: Provides commands and metrics to interact with a Chronicle instance.
args:
  - start:
      long: start
      help: Start a new Chronicle instance
      conflicts_with:
        - stop
        - rebuild
  - stop:
      long: stop
      help: Stop a running Chronicle instance
      conflicts_with:
        - start
        - rebuild
  - rebuild:
      long: rebuild
      help: Rebuild the RING
      conflicts_with:
        - stop
        - start
subcommands:
  - node:
      about: Manage scylla nodes
      subcommands:
        - add:
            about: Add a scylla node for the scylla instance with the given scylla DB address
            args:
              - address:
                  short: a
                  takes_value: true
                  value_name: SCYLLA_DB_ADDRESS
                  required: true
                  help: The exposed ScyllaDB address and port
        - remove:
            about: Remove the scylla node with the given id
            args:
              - id:
                  takes_value: true
                  value_name: ID
                  required: true
                  help: The unique ID of the scylla node
        - list:
            short: l
            about: List the running scylla nodes
  - brokers:
      about: Manage Chronicle brokers
      subcommands:
        - add:
            short: a
            about: Add a broker instance to process network messages
            args:
              - mqtt-address:
                  short: mq
                  takes_value: true
                  value_name: MQTT_ADDRESSES
                  required: true
                  multiple: true
                  help: The MQTT addresses which will be subscribed to receive messages (ex. tcp://api.hornet-0.testnet.chrysalis2.com:1883)
              - endpoint-address:
                  short: e
                  takes_value: true
                  value_name: ENDPOINT_ADDRESSES
                  required: false
                  multiple: true
                  help: The TCP endpoint addresses and port which will be used to fetch missing messages (ex. https://api.hornet-0.testnet.chrysalis2.com/api/v1)
        - remove:
            short: r
            about: Remove the broker instance with the given id
            args:
              - id:
                  takes_value: true
                  value_name: ID
                  required: true
                  help: The unique ID of the broker
        - list:
            short: l
            about: List the running brokers
  - archive:
      about: Manage archived milestones
      subcommands:
        - import:
            short: i
            about: Import a range of milestones from archive files
            args:
              - directory:
                  short: d
                  takes_value: true
                  value_name: DIR
                  help: The directory containing archive files to import. Defaults to the configured output directory.
              - range:
                  short: r
                  takes_value: true
                  value_name: RANGE
                  help: The range of milestone indexes to import. Defaults to the configured range.
